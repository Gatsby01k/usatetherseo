---
import BaseLayout from "../../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const posts = (await getCollection("blog"))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---
<BaseLayout title="Blog" description="Articles and guides about USAT/USDT stablecoins.">
  <h1>Blog</h1>
  <p class="muted">Guides, comparisons, and safety checklists.</p>

  {posts.map((post) => (
    <article class="card">
      <h2><a href={`/blog/${post.slug}/`}>{post.data.title}</a></h2>
      <div class="meta">
        <time datetime={post.data.pubDate.toISOString()}>
          {post.data.pubDate.toLocaleDateString("en-US", { year: "numeric", month: "short", day: "2-digit" })}
        </time>
      </div>
      {post.data.tags?.length ? (
        <p>
          {post.data.tags.map((t) => <span class="badge">{t}</span>)}
        </p>
      ) : null}
      <p>{post.data.description}</p>
    </article>
  ))}
</BaseLayout>
